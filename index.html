<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">        
        <div class="header-top-flexbox">
                    <form>
                            <fieldset>
                               <legend>Discounts</legend>
                               <p>
                                    <select name="discounts-list" onchange="location = this.value;">
                                    <option value="">Select Offer</option>
                                    <option value = "https://www.bird.co/press/bird-announces-one-bird/">One Bird</option>
                                    <option value = "https://www.li.me/community-impact">Lime Access</option>
                                    <option value = "https://www.micromobility.com/bolt-forward/">Bolt Forward</a></option>
                                    <option value = "https://www.spin.app/spin-access">Spin Access</a></option>
                                  </select>
                               </p>
                            </fieldset>
                         </form>
            <nav class="header-nav-flexbox">
                <ul>
                    <li><a href="#" id="home">Home</a></li>
                    <li><a href="#trip-input" id="trip-link" alt="Trip input">Create Trip</a></li>
                    <li><a href="#footer-safety" id="safety-link" alt="Safety info">Safety Information</a></li>
                </ul>
            </nav>
        </div>
        <figure class="hero-img">
            <img src="img/logo-2.jpg" alt="Scooter image">
        </figure>
    </header>
    <main>
        <section class="trip-flexbox" id="trip-input">
            <div class="input-box">
                    <fieldset>
                    <legend>Start your journey</legend>
                    <form>
                        <input type="text" name="starting-point" id="starting-point" value="Your current location" placeholder="Enter Adress">
                        <br><br>
                        <input type="text" name="ending-point" id="ending-point" placeholder="Enter Adress">
                        <br><br>
                        <input type="button" value="Submit" onclick="showRoute()">
                    </form>
                    </fieldset>
                </div>
        </section>
        <section class="google-map">           
            </div>

            <div id="map"></div>
        </section>
        <section class="results-flexbox" id="results-input">
            <h4>Results</h4>
            <input type="text" placeholder="results">
            <input type="text" placeholder="results">
            <input type="text" placeholder="results">
        </section>
        </section>
    </main>
    <footer class="footer">
        <h3 id="footer-safety">Safety Info</h3>
        <p>1. Wear standard security equipment
                Some accidents just cannot be averted, even in the event you’ve taken every precaution. That is precisely why it is vital that you wear personal protective equipment in case the worst happens. If it comes to scooter safety and private well-being, there is no such thing as over-preparation.
                Always wear a helmet to protect your head, and if need be, a mouth guard. Elbow and knee straps protect those corners from scrapes and bumps if you tip over. Gloves help improve your grip on the deal. Electric scooters are, for the most part, protected, but it is worth it to be nicely ready.
                <br>2. Check the tires
                Always assess the scooter’s tires before use. A quick review prior to the ride can go a long way in ensuring your security the moment that you are out. If you understand other scooter consumers, educate them with the approach to inspect the scooter’s tires too.
                Some of the things that you’ve got to keep a watch out for include the outside appearance of the tires and its pressure. Constantly check when the treads are not worn out. Replace if needed.
                <br>3. Concentrate on Your Surroundings
                It’s easy to lose focus of your surroundings while riding a scooter. Always focus on the road and observe your surroundings without sacrificing attention.
                Look out for pedestrians, oncoming traffic and other barriers. You’ve got to take care to prevent accidents. Adhere to regulations and rules, follow the path of people and shield against infested places.
                <br>4. Be Conscious of barriers
                Always look out for barriers and defects such as potholes, bumps, and crevices. These hurdles are among the main reasons why scooter accidents happen. Maintain your focus, carefully avoid the barrier down or slow and stop if necessary.
                Ordinarily, the ideal thing to do would be to remain calm, slowly decrease your speed until you come to a full stop. If stopping is not possible, immediately head to be given a clear area away from traffic.
                Be mindful of puddles, also. Puddles might appear harmless, but they can be rather dangerous. They could hide holes and other crevices that could lead to a serious injury. Keep your speed low when using a scooter through wet weather. When it is possible, stop using it altogether.
                <br>5. Avoid slippery surfaces
                Practice extra caution when riding a scooter on slippery and wet surfaces such as marble tiles, metal surfaces, wet streets, and muddy sidewalks. Water makes it more difficult for the tires to support your scooter and might potentially cause injuries. Always keep a low speed when cruising on wet terrain.
                <br>6. Keep calm and push slowly
                Sudden downpours happen all the time, and using an electric scooter in the rain may endanger individuals, particularly if you’re somewhat from the source. Keep calm whilst riding and push lightly as the streets and pavements will be slippery and wet.
                <br>7. Stop using a scooter during lightning storms
                While rain can make a scooter ride dangerous, together with proper preparation, it’s possible to safely make your way house. However, if a lightning storm occurs, you have to quickly cease using your electric scooter and head for refuge. Lightning is extremely dangerous and can maim and kill you.<span id="click-here"><a href="https://safer-america.com/3-electric-scooter-tips-for-safety/" id="safety-add" alt="_blank">Click here for more safety tips!</a></span></p>
    </footer>   
    <script type="text/javascript">
        function handleSelect(elm)
        {
        window.location = elm.value+".php";
        }
    </script>
    <script type="text/javascript" src="main.js"></script>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    // Note: This example requires that you consent to location sharing when
    // prompted by your browser. If you see the error "The Geolocation service
    // failed.", it means you probably did not give permission for the browser to
    // locate you.

    var map, infoWindow;
    var directionsService;
    var directionsRender;
    var apiURL = "https://maps.googleapis.com/maps/api/js?key=AIzaSyDhIhJRFyekqCAYANSPRvxV0EjFvTEb9nw&callback=initMap";


    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 14
        });
        infoWindow = new google.maps.InfoWindow;

        var bikeLayer = new google.maps.BicyclingLayer();
        bikeLayer.setMap(map);
        var trafficLayer = new google.maps.TrafficLayer();
        trafficLayer.setMap(map);
        
        infoWindow = new google.maps.InfoWindow;

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent('You are here!');
            infoWindow.open(map);
            map.setCenter(pos);
            }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
            });
        } else {
        // Browser doesn't support Geolocation
        handleLocationError(false, infoWindow, map.getCenter());
        }
    }

    function initRender() {
        directionsService = new google.maps.DirectionsService();
        directionsDisplay = new google.maps.DirectionsRenderer();
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 14
        });
    directionsDisplay.setMap(map);
    }

    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                            'Error: The Geolocation service failed.' :
                            'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
    }

    function showRoute() {
        var start = document.getElementById('starting-point').value;
        var end = document.getElementById('ending-point').value;
        var request = {
            origin: start,
            destination: end,
            travelMode: "BICYCLING"
        };
        
        $.ajax({
                url: apiURL,
                type:"GET",
                success: initRender(),
                error: function(error){
                    console.log(`Error ${error}`);
                }		
        })
        
        directionsService.route(request, function(result, status) {
            if (status == 'OK') {
                directionsDisplay.setDirections(result);
            }
        });
        
        
    }
</script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhIhJRFyekqCAYANSPRvxV0EjFvTEb9nw&callback=initMap">
</script>
</body>
</html>